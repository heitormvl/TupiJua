@model TupiJua.Models.WorkoutSession

@{
    ViewData["Title"] = "Detalhes do Treino";
    var totalExercises = Model.LoggedExercises.Count;
    var totalSets = Model.LoggedExercises.Sum(le => le.Sets);
    var totalVolume = Model.LoggedExercises.Sum(le => le.Weight * le.Sets * le.IntegerReps);
    var muscleGroups = Model.LoggedExercises
        .SelectMany(le => le.Exercise.ExerciseMuscleGroups.Select(emg => emg.MuscleGroup.Name))
        .Distinct()
        .ToList();
}

@functions {
    string FormatVolume(decimal volume)
    {
        return volume % 1 == 0 ? volume.ToString("N0") : volume.ToString("N2");
    }

    string FormatWeight(decimal weight)
    {
        return weight % 1 == 0 ? weight.ToString("N0") : weight.ToString("N2");
    }
}

<div class="container-fluid px-3 px-md-4 py-4">
    <div class="row justify-content-center">
        <div class="col-12 col-lg-10">
            <!-- Header Card -->
            <div class="hero-card mb-4" style="position: relative;">
                @if (Model.IsCompleted)
                {
                    <span class="badge bg-success d-none d-md-inline-flex" style="position: absolute; top: 1.5rem; right: 1.5rem; font-size: 1rem; padding: 0.5rem 1rem; z-index: 10;">
                        <i class="fas fa-check-circle me-2"></i>
                        Concluído
                    </span>
                }
                else
                {
                    <span class="badge bg-warning text-dark d-none d-md-inline-flex" style="position: absolute; top: 1.5rem; right: 1.5rem; font-size: 1rem; padding: 0.5rem 1rem; z-index: 10;">
                        <i class="fas fa-clock me-2"></i>
                        Em andamento
                    </span>
                }
                <div class="hero-content">
                    <h2 class="hero-title mb-2">
                        <i class="fas fa-dumbbell me-2"></i>
                        @if (Model.WorkoutPlan != null)
                        {
                            <span>@Model.WorkoutPlan.Name</span>
                        }
                        else
                        {
                            <span>Treino Livre</span>
                        }
                    </h2>
                    <p class="hero-subtitle mb-0">
                        <i class="fas fa-calendar me-2"></i>
                        @Model.Date.ToString("dd 'de' MMMM 'de' yyyy", new System.Globalization.CultureInfo("pt-BR"))
                        às @Model.Date.ToString("HH:mm")
                    </p>
                    <div class="d-flex d-md-none justify-content-center mt-3">
                        @if (Model.IsCompleted)
                        {
                            <span class="badge bg-success" style="font-size: 1rem; padding: 0.5rem 1rem;">
                                <i class="fas fa-check-circle me-2"></i>
                                Concluído
                            </span>
                        }
                        else
                        {
                            <span class="badge bg-warning text-dark" style="font-size: 1rem; padding: 0.5rem 1rem;">
                                <i class="fas fa-clock me-2"></i>
                                Em andamento
                            </span>
                        }
                    </div>
                </div>
            </div>

            <!-- Stats Summary -->
            <div class="row g-3 mb-4">
                <div class="col-12 col-md-3">
                    <div class="stat-card stat-card-1">
                        <div class="stat-icon">
                            <i class="fas fa-list"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value">@totalExercises</div>
                            <div class="stat-label">Exercício@(totalExercises != 1 ? "s" : "")</div>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-3">
                    <div class="stat-card stat-card-2">
                        <div class="stat-icon">
                            <i class="fas fa-redo"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value">@totalSets</div>
                            <div class="stat-label">Série@(totalSets != 1 ? "s" : "")</div>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-3">
                    <div class="stat-card stat-card-3">
                        <div class="stat-icon">
                            <i class="fas fa-weight-hanging"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value">@FormatVolume(totalVolume)</div>
                            <div class="stat-label">Volume (kg)</div>
                        </div>
                    </div>
                </div>
                @if (Model.TotalDurationMinutes.HasValue)
                {
                    <div class="col-12 col-md-3">
                        <div class="stat-card stat-card-1">
                            <div class="stat-icon">
                                <i class="fas fa-stopwatch"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value">@Model.TotalDurationMinutes</div>
                                <div class="stat-label">Minutos</div>
                            </div>
                        </div>
                    </div>
                }
            </div>

            <!-- Muscle Groups -->
            @if (muscleGroups.Any())
            {
                <div class="workout-plans-card mb-4">
                    <h5 class="mb-3">
                        <i class="fas fa-bullseye me-2"></i>
                        Grupos Musculares Trabalhados
                    </h5>
                    <div class="d-flex flex-wrap gap-2">
                        @foreach (var muscle in muscleGroups)
                        {
                            <span class="badge bg-primary" style="font-size: 0.9rem; padding: 0.5rem 1rem;">
                                @muscle
                            </span>
                        }
                    </div>
                </div>
            }

            <!-- Exercises List -->
            <div class="workout-plans-card mb-4">
                <div class="d-flex align-items-center justify-content-between mb-3">
                    <h5 class="mb-0">
                        <i class="fas fa-clipboard-list me-2"></i>
                        Exercícios Realizados
                    </h5>
                    @if (!Model.IsCompleted)
                    {
                        <div class="d-flex gap-2">
                            <a asp-action="AddExercise" asp-route-sessionId="@Model.Id" class="btn btn-sm btn-primary">
                                <i class="fas fa-plus me-1"></i>
                                Adicionar Exercício
                            </a>
                            <form asp-action="FinishWorkout" asp-route-sessionId="@Model.Id" method="post" class="d-inline">
                                <button type="submit" class="btn btn-sm btn-success">
                                    <i class="fas fa-check me-1"></i>
                                    Finalizar Treino
                                </button>
                            </form>
                        </div>
                    }
                </div>

                @if (Model.LoggedExercises.Any())
                {
                    <div class="exercises-list">
                        @foreach (var loggedExercise in Model.LoggedExercises)
                        {
                            <div class="exercise-detail-card mb-3">
                                <div class="exercise-detail-header">
                                    <div class="d-flex align-items-start justify-content-between">
                                        <div class="flex-grow-1">
                                            <h5 class="exercise-detail-name mb-2">
                                                <i class="fas fa-dumbbell me-2 text-primary"></i>
                                                @loggedExercise.Exercise.Name
                                            </h5>
                                            @if (loggedExercise.Exercise.ExerciseMuscleGroups.Any())
                                            {
                                                <div class="exercise-muscles mb-2">
                                                    @foreach (var emg in loggedExercise.Exercise.ExerciseMuscleGroups)
                                                    {
                                                        <span class="badge bg-light text-dark me-1">
                                                            @emg.MuscleGroup.Name
                                                        </span>
                                                    }
                                                </div>
                                            }
                                        </div>
                                        @if (loggedExercise.ShouldIncreaseLoad)
                                        {
                                            <span class="badge bg-warning text-dark">
                                                <i class="fas fa-arrow-up me-1"></i>
                                                Aumentar carga
                                            </span>
                                        }
                                    </div>
                                </div>

                                <div class="exercise-detail-body">
                                    <div class="row g-3">
                                        <div class="col-6 col-md-3">
                                            <div class="detail-item">
                                                <div class="detail-label">
                                                    <i class="fas fa-redo me-1"></i>
                                                    Séries
                                                </div>
                                                <div class="detail-value">@loggedExercise.Sets</div>
                                            </div>
                                        </div>
                                        <div class="col-6 col-md-3">
                                            <div class="detail-item">
                                                <div class="detail-label">
                                                    <i class="fas fa-hashtag me-1"></i>
                                                    Repetições
                                                </div>
                                                <div class="detail-value">@loggedExercise.Reps</div>
                                            </div>
                                        </div>
                                        <div class="col-6 col-md-3">
                                            <div class="detail-item">
                                                <div class="detail-label">
                                                    <i class="fas fa-weight-hanging me-1"></i>
                                                    Carga
                                                </div>
                                                <div class="detail-value">@FormatWeight(loggedExercise.Weight) kg</div>
                                            </div>
                                        </div>
                                        <div class="col-6 col-md-3">
                                            <div class="detail-item">
                                                <div class="detail-label">
                                                    <i class="fas fa-stopwatch me-1"></i>
                                                    Descanso
                                                </div>
                                                <div class="detail-value">@loggedExercise.RestTime @(loggedExercise.RestInMinutes ? "min" : "seg")</div>
                                            </div>
                                        </div>
                                    </div>

                                    @if (!string.IsNullOrWhiteSpace(loggedExercise.Observation))
                                    {
                                        <div class="mt-3 pt-3 border-top">
                                            <div class="detail-label mb-2">
                                                <i class="fas fa-comment me-1"></i>
                                                Observações
                                            </div>
                                            <p class="mb-0 text-muted">@loggedExercise.Observation</p>
                                        </div>
                                    }

                                    <div class="mt-3 pt-3 border-top">
                                        <div class="text-muted small">
                                            <i class="fas fa-calculator me-1"></i>
                                            Volume: <strong>@FormatVolume(loggedExercise.Weight * loggedExercise.Sets * loggedExercise.IntegerReps) kg</strong>
                                        </div>
                                    </div>

                                    @if (!Model.IsCompleted)
                                    {
                                        <div class="mt-3 pt-3 border-top">
                                            <div class="d-flex gap-2">
                                                <a asp-action="EditLoggedExercise" asp-route-id="@loggedExercise.Id" class="btn btn-sm btn-outline-primary flex-fill">
                                                    <i class="fas fa-edit me-1"></i>
                                                    Editar
                                                </a>
                                                <button type="button" class="btn btn-sm btn-outline-danger flex-fill" 
                                                        data-bs-toggle="modal" 
                                                        data-bs-target="#deleteLoggedExerciseModal"
                                                        data-id="@loggedExercise.Id"
                                                        data-name="@loggedExercise.Exercise.Name">
                                                    <i class="fas fa-trash me-1"></i>
                                                    Excluir
                                                </button>
                                            </div>
                                        </div>
                                    }
                                </div>
                            </div>
                        }
                    </div>
                }
                else
                {
                    <div class="empty-state">
                        <i class="fas fa-clipboard-list"></i>
                        <h5>Nenhum exercício registrado</h5>
                        <p>Adicione exercícios para começar seu treino!</p>
                    </div>
                }
            </div>

            <!-- Action Buttons -->
            <div class="d-flex justify-content-between gap-2">
                <a asp-action="Index" class="btn btn-outline-secondary">
                    <i class="fas fa-arrow-left me-2"></i>
                    Voltar
                </a>
                <div class="d-flex gap-2">
                    @if (Model.LoggedExercises.Any())
                    {
                        <button type="button" class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#shareNameModal">
                            <i class="fas fa-share-alt me-2"></i>
                            Compartilhar
                        </button>
                    }
                    @if (!Model.IsCompleted && Model.LoggedExercises.Any())
                    {
                        <form asp-action="FinishWorkout" asp-route-sessionId="@Model.Id" method="post" class="d-inline">
                            <button type="submit" class="btn btn-success">
                                <i class="fas fa-check me-2"></i>
                                Finalizar Treino
                            </button>
                        </form>
                    }
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal fade" id="deleteLoggedExerciseModal" tabindex="-1" aria-labelledby="deleteLoggedExerciseModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header border-0 pb-0">
                <h5 class="modal-title" id="deleteLoggedExerciseModalLabel">
                    <i class="fas fa-exclamation-triangle text-danger me-2"></i>
                    Confirmar Exclusão
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
            </div>
            <div class="modal-body">
                <p class="mb-2">Tem certeza que deseja excluir o exercício:</p>
                <p class="fw-bold mb-3" id="exerciseNameToDelete"></p>
                <div class="alert alert-warning mb-0">
                    <i class="fas fa-info-circle me-2"></i>
                    <small><strong>Atenção:</strong> Esta ação não pode ser desfeita!</small>
                </div>
            </div>
            <div class="modal-footer border-0 pt-0">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    <i class="fas fa-times me-2"></i>
                    Cancelar
                </button>
                <form id="deleteLoggedExerciseForm" method="post" style="display: inline;"
                      data-delete-url="@Url.Action("DeleteLoggedExercise", "Training")">
                    @Html.AntiForgeryToken()
                    <button type="submit" class="btn btn-danger">
                        <i class="fas fa-trash me-2"></i>
                        Excluir
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Share Name Modal -->
<div class="modal fade" id="shareNameModal" tabindex="-1" aria-labelledby="shareNameModalLabel" aria-hidden="true"
     data-plan-name="@(Model.WorkoutPlan?.Name)">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg">
            <div class="modal-header border-0 pb-0 pt-4 px-4">
                <div class="d-flex align-items-center gap-3">
                    <div style="width:48px;height:48px;border-radius:12px;background:linear-gradient(135deg,rgba(13,110,253,0.12),rgba(84,115,255,0.12));display:flex;align-items:center;justify-content:center;">
                        <i class="fas fa-share-alt" style="color:#0d6efd;font-size:1.25rem;"></i>
                    </div>
                    <div>
                        <h5 class="modal-title mb-0 fw-bold" id="shareNameModalLabel">Compartilhar Treino</h5>
                        <p class="text-muted small mb-0">Gere uma imagem para compartilhar</p>
                    </div>
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
            </div>
            <div class="modal-body px-4 pb-0 pt-3">
                <p class="text-muted mb-3" style="font-size:0.95rem;">
                    <i class="fas fa-image me-2 text-primary"></i>
                    Será gerada uma imagem com o resumo do seu treino que você pode compartilhar onde quiser.
                </p>
                <div class="mb-3">
                    <label class="form-label fw-semibold mb-2">
                        <i class="fas fa-tag me-1 text-primary"></i>
                        Nome do treino na imagem
                    </label>
                    @if (Model.WorkoutPlan != null)
                    {
                        <div class="d-flex flex-column gap-2 mb-3">
                            <div class="form-check share-name-option p-3 rounded-3 border" style="cursor:pointer;" id="optionPlanName">
                                <input class="form-check-input" type="radio" name="shareNameOption" id="radioNamePlan" value="plan" checked>
                                <label class="form-check-label w-100" for="radioNamePlan" style="cursor:pointer;">
                                    <span class="fw-semibold">@Model.WorkoutPlan.Name</span>
                                    <br><small class="text-muted">Nome do plano de treino</small>
                                </label>
                            </div>
                            <div class="form-check share-name-option p-3 rounded-3 border" style="cursor:pointer;" id="optionCustomName">
                                <input class="form-check-input" type="radio" name="shareNameOption" id="radioNameCustom" value="custom">
                                <label class="form-check-label w-100" for="radioNameCustom" style="cursor:pointer;">
                                    <span class="fw-semibold">Nome personalizado</span>
                                    <br><small class="text-muted">Defina um nome diferente</small>
                                </label>
                            </div>
                        </div>
                    }
                    <div id="customNameWrapper" class="custom-name-wrapper @(Model.WorkoutPlan != null ? "" : "is-visible")">
                        <div class="input-group">
                            <span class="input-group-text bg-transparent">
                                <i class="fas fa-pen text-primary"></i>
                            </span>
                            <input type="text" class="form-control" id="customShareName"
                                   placeholder="Ex: Treino de Peito e Tríceps"
                                   value="@(Model.WorkoutPlan == null ? "Treino Livre" : "")"
                                   maxlength="60">
                        </div>
                        <div class="form-text">Máximo de 60 caracteres</div>
                    </div>
                </div>
            </div>
            <div class="modal-footer border-0 pt-2 px-4 pb-4">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                    <i class="fas fa-times me-2"></i>Cancelar
                </button>
                <button type="button" class="btn btn-primary px-4" id="btnGenerateImage">
                    <i class="fas fa-magic me-2"></i>Gerar imagem
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Share Image Modal -->
<div class="modal fade" id="shareImageModal" tabindex="-1" aria-labelledby="shareImageModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content border-0 shadow-lg">
            <div class="modal-header border-0 pb-0 pt-4 px-4">
                <div class="d-flex align-items-center gap-3">
                    <div style="width:48px;height:48px;border-radius:12px;background:linear-gradient(135deg,rgba(25,135,84,0.12),rgba(32,201,151,0.12));display:flex;align-items:center;justify-content:center;">
                        <i class="fas fa-image" style="color:#198754;font-size:1.25rem;"></i>
                    </div>
                    <div>
                        <h5 class="modal-title mb-0 fw-bold" id="shareImageModalLabel">Imagem gerada!</h5>
                        <p class="text-muted small mb-0">Baixe ou compartilhe seu treino</p>
                    </div>
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
            </div>
            <div class="modal-body px-4 pt-3 pb-2 text-center">
                <div id="generatingSpinner" class="py-5">
                    <div class="spinner-border text-primary" style="width:3rem;height:3rem;" role="status">
                        <span class="visually-hidden">Gerando...</span>
                    </div>
                    <p class="text-muted mt-3 mb-0">Gerando sua imagem...</p>
                </div>
                <div id="generatedImageWrapper" style="display:none;">
                    <img id="generatedImage" src="" alt="Resumo do treino"
                         class="img-fluid rounded-3 shadow-sm w-100"
                         style="border:1px solid rgba(0,0,0,0.08);">
                </div>
            </div>
            <div class="modal-footer border-0 pt-2 px-4 pb-4 d-flex gap-2">
                <button type="button" class="btn btn-outline-primary flex-fill" id="btnDownloadImage" style="display:none;">
                    <i class="fas fa-download me-1"></i>Baixar
                </button>
                <button type="button" class="btn btn-primary flex-fill" id="btnShareImage" style="display:none;">
                    <i class="fas fa-share-alt me-1"></i>Compartilhar
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Hidden workout image template (captured by html2canvas) -->
<div id="workoutImageTemplate" style="
    position:fixed; left:-9999px; top:-9999px;
    width:540px; height:720px; overflow:hidden;
    background:linear-gradient(150deg,#0d47a1 0%,#1565c0 30%,#1976d2 60%,#5473ff 100%);
    font-family:'Segoe UI',system-ui,-apple-system,sans-serif;
    padding:0; border-radius:0;">

    <!-- Background decorative circles -->
    <div style="position:absolute;width:300px;height:300px;border-radius:50%;background:rgba(255,255,255,0.05);top:-80px;right:-80px;pointer-events:none;"></div>
    <div style="position:absolute;width:200px;height:200px;border-radius:50%;background:rgba(255,255,255,0.04);bottom:120px;left:-60px;pointer-events:none;"></div>

    <!-- Header -->
    <div style="padding:36px 32px 20px;position:relative;z-index:1;">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;">
            <div style="display:flex;align-items:center;gap:10px;">
                <div style="width:36px;height:36px;border-radius:10px;background:rgba(255,255,255,0.15);display:flex;align-items:center;justify-content:center;backdrop-filter:blur(8px);">
                    <span style="color:white;font-size:16px;font-weight:bold;">@(Model?.User?.UserName?.Length > 0 ? Model.User.UserName.Substring(0,1).ToUpper() : "?")</span>
                </div>
                <span style="color:rgba(255,255,255,0.85);font-size:14px;font-weight:600;letter-spacing:1px;">@(Model?.User?.UserName ?? "Usuário")</span>
            </div>
            <span id="imgDate" style="color:rgba(255,255,255,0.7);font-size:12px;">@Model.Date.ToString("dd/MM/yyyy")</span>
        </div>
        <h1 id="imgWorkoutName" style="color:white;font-size:26px;font-weight:800;margin:0 0 4px;line-height:1.2;text-shadow:0 2px 8px rgba(0,0,0,0.15);">Treino</h1>
        <p style="color:rgba(255,255,255,0.75);font-size:13px;margin:0;">
            @Model.Date.ToString("dddd, dd 'de' MMMM", new System.Globalization.CultureInfo("pt-BR"))
        </p>
    </div>

    <!-- KPI strip -->
    <div style="margin:0 24px 20px;background:rgba(255,255,255,0.12);backdrop-filter:blur(12px);border-radius:16px;padding:16px 20px;border:1px solid rgba(255,255,255,0.18);position:relative;z-index:1;">
        <div style="display:flex;justify-content:space-around;text-align:center;">
            <div>
                <div style="color:white;font-size:26px;font-weight:800;line-height:1;">@Model.LoggedExercises.Count</div>
                <div style="color:rgba(255,255,255,0.75);font-size:11px;margin-top:4px;font-weight:500;">EXERCÍCIOS</div>
            </div>
            <div style="width:1px;background:rgba(255,255,255,0.2);margin:0 4px;"></div>
            <div>
                <div style="color:white;font-size:26px;font-weight:800;line-height:1;">@Model.LoggedExercises.Sum(le => le.Sets)</div>
                <div style="color:rgba(255,255,255,0.75);font-size:11px;margin-top:4px;font-weight:500;">SÉRIES</div>
            </div>
            <div style="width:1px;background:rgba(255,255,255,0.2);margin:0 4px;"></div>
            <div>
                <div id="imgVolume" style="color:white;font-size:26px;font-weight:800;line-height:1;">@{var vol = Model.LoggedExercises.Sum(le => le.Weight * le.Sets * le.IntegerReps); }@(vol % 1 == 0 ? vol.ToString("N0") : vol.ToString("N2"))</div>
                <div style="color:rgba(255,255,255,0.75);font-size:11px;margin-top:4px;font-weight:500;">VOL. (KG)</div>
            </div>
            @if (Model.TotalDurationMinutes.HasValue)
            {
                <div style="width:1px;background:rgba(255,255,255,0.2);margin:0 4px;"></div>
                <div>
                    <div style="color:white;font-size:26px;font-weight:800;line-height:1;">@Model.TotalDurationMinutes</div>
                    <div style="color:rgba(255,255,255,0.75);font-size:11px;margin-top:4px;font-weight:500;">MIN</div>
                </div>
            }
        </div>
    </div>

    <!-- Exercises section -->
    <div style="margin:0 24px;position:relative;z-index:1;">
        <p style="color:rgba(255,255,255,0.65);font-size:11px;font-weight:600;letter-spacing:1.5px;margin-bottom:10px;text-transform:uppercase;">Exercícios</p>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;">
            @foreach (var le in Model.LoggedExercises.Where(ex => !ex.IsSkipped))
            {
                <div style="background:rgba(255,255,255,0.1);backdrop-filter:blur(8px);border-radius:12px;padding:12px 14px;border:1px solid rgba(255,255,255,0.15);">
                    <div style="color:white;font-size:12px;font-weight:700;margin-bottom:4px;line-height:1.3;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">@le.Exercise.Name</div>
                    <div style="color:rgba(255,255,255,0.8);font-size:11px;">@le.Sets séries × @le.Reps reps</div>
                    <div style="color:rgba(255,255,255,0.6);font-size:10px;margin-top:2px;">@(le.Weight % 1 == 0 ? le.Weight.ToString("N0") : le.Weight.ToString("N2")) kg</div>
                </div>
            }
        </div>
    </div>

    <!-- Footer -->
    <div style="position:absolute;bottom:0;left:0;right:0;padding:14px 32px 18px;text-align:center;background:linear-gradient(0deg,rgba(0,0,0,0.25),transparent);z-index:1;">
        <span style="color:rgba(255,255,255,0.5);font-size:10px;letter-spacing:1px;">tupijua.app</span>
    </div>
</div>

<style>
    .custom-name-wrapper {
        overflow: hidden;
        max-height: 0;
        opacity: 0;
        transition: max-height 0.35s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
    }
    .custom-name-wrapper.is-visible {
        max-height: 200px;
        opacity: 1;
    }
</style>

@section Scripts {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"
            integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoeqMV/TJlSKda6FXzoEyYGjTe+vXA=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
}
